<!DOCTYPE html>  <html>  <head>      <title>profile.coffee</title>      <meta http-equiv="content-type" content="text/html; charset=UTF-8">      <link rel="stylesheet" media="all" href="zocco.css" />  </head>  <body>      <div id="container">          <div id="background"></div>                        <div id="jumpWrapper">                  <div id="jumpPage">                      <label>Files...</label>                                                                  <a class="source" href="app.html">                          app.coffee                      </a>                                                                  <a class="source" href="collection.html">                          collection.coffee                      </a>                                                                  <a class="source" href="facets.html">                          facets.coffee                      </a>                                                                  <a class="source" href="index.html">                          index.coffee                      </a>                                                                  <a class="source" href="facetArray.html">                          facetArray.coffee                      </a>                                                                  <a class="source" href="schema.html">                          schema.coffee                      </a>                                                                  <a class="source" href="facet.html">                          facet.coffee                      </a>                                                                  <a class="source" href="item.html">                          item.coffee                      </a>                                                                  <a class="source" href="print.html">                          print.coffee                      </a>                                                                  <a class="source" href="routes.html">                          routes.coffee                      </a>                                                                  <a class="source" href="facet.html">                          facet.coffee                      </a>                                                                  <a class="source" href="item.html">                          item.coffee                      </a>                                                                  <a class="source" href="profile.html">                          profile.coffee                      </a>                                                                  <a class="source" href="cube.html">                          cube.coffee                      </a>                                                                  <a class="source" href="code.html">                          code.coffee                      </a>                                                                  <a class="source" href="code.html">                          code.coffee                      </a>                                                                  <a class="source" href="code.html">                          code.coffee                      </a>                                                                  <a class="source" href="code.html">                          code.coffee                      </a>                                                                  <a class="source" href="code.html">                          code.coffee                      </a>                                                                  <a class="source" href="server.config.html">                          server.config.coffee                      </a>                                                                  <a class="source" href="server.routes.html">                          server.routes.coffee                      </a>                                                                  <a class="source" href="server.settings.html">                          server.settings.coffee                      </a>                                                                  <a class="source" href="entityController.html">                          entityController.coffee                      </a>                                                                  <a class="source" href="extensionController.html">                          extensionController.coffee                      </a>                                                                  <a class="source" href="facetManager.html">                          facetManager.coffee                      </a>                                                                  <a class="source" href="itemController.html">                          itemController.coffee                      </a>                                                                  <a class="source" href="printController.html">                          printController.coffee                      </a>                                                                  <a class="source" href="schema.html">                          schema.coffee                      </a>                                                                  <a class="source" href="solrManager.html">                          solrManager.coffee                      </a>                                                                  <a class="source" href="genSchema.html">                          genSchema.coffee                      </a>                                                                  <a class="source" href="importer-fortunes.html">                          importer-fortunes.coffee                      </a>                                                                  <a class="source" href="importer-hosts.html">                          importer-hosts.coffee                      </a>                                                                  <a class="source" href="importer-projects.html">                          importer-projects.coffee                      </a>                                        </div>              </div>                    <table cellpadding="0" cellspacing="0">              <thead>                  <tr>                      <th class="docs">                          <h1>                              profile.coffee                          </h1>                      </th>                      <th class="code">                      </th>                  </tr>              </thead>              <tbody>                                                      <tr id="section-1">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-1">&#182;</a>                          </div>                          <h3 id="paneview">Pane View</h3>                      </td>                      <td class="code">                          <div class="highlight"><pre><span class="nx">$</span> <span class="o">-&gt;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-2">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-2">&#182;</a>                          </div>                          <p>Defines a parent class for profile and group views.
A pane is located on the right side of the application and contains
either a profile view or a group view. It can also be extended to
allocate other things such as a Team view for the team app.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>    <span class="k">class</span> <span class="nb">window</span><span class="p">.</span><span class="nx">BasePaneView</span> <span class="k">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-3">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-3">&#182;</a>                          </div>                          <h3 id="initialize">Initialize</h3>

<ol>
<li>Point to app</li>
<li>Listen for ESC keybinding</li>
<li>Re-Set arrow keys movements on app</li>
</ol>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">initialize: </span><span class="p">()</span> <span class="o">=&gt;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-4">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-4">&#182;</a>                          </div>                          <p>Handy pointer to the app</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="vi">@app = </span><span class="nb">window</span><span class="p">.</span><span class="nx">App</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-5">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-5">&#182;</a>                          </div>                          <p>Clear all keybindings, then add close on ESC and re-add movement
keybindings on content area.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">@setKeybindings</span><span class="p">()</span>
            <span class="nx">@app</span><span class="p">.</span><span class="nx">setMoveKeybindings</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-6">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-6">&#182;</a>                          </div>                          <p>Make some space on the container</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.thumbnailContainer, #tableContainer&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span> <span class="s">&#39;onProfile&#39;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-7">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-7">&#182;</a>                          </div>                          <p>Also move the footer to the right</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#footer, #columnsSelectWrapper&#39;</span><span class="p">).</span><span class="nx">addClass</span> <span class="s">&#39;onProfile&#39;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-8">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-8">&#182;</a>                          </div>                          <p>Show pane. .show() fails on some browsers.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;display&#39;</span><span class="p">,</span> <span class="s">&#39;block&#39;</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-9">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-9">&#182;</a>                          </div>                          <h3 id="setmodelproperties">Set Model properties</h3>

<p>Set values on a model for text, date and picture fields, and allow
unsetting empty properties if required.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModel: </span><span class="nf">(m, unset, cb) -&gt;</span>

            <span class="nx">@setModelTextFields</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">@setModelIntFields</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">@setModelDropdownFields</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">@setModelDateFields</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">@setModelPicFields</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">@setModelFacetFields</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">@setModelTupleFields</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">cb</span><span class="p">()</span> <span class="k">if</span> <span class="nx">cb</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-10">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-10">&#182;</a>                          </div>                          <p>Sets a model's text properties: strings, emails and multilines.
All of these fields are stored in the DB as strings.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModelTextFields: </span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input, textarea&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nv">$i = </span><span class="nx">$</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>

                <span class="nv">id = </span><span class="nx">$i</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

                <span class="nv">f = </span><span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">getFieldById</span> <span class="nx">id</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">return</span> <span class="nx">unless</span> <span class="o">!</span><span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">or</span> <span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&quot;text&quot;</span> <span class="o">or</span>
                    <span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&quot;email&quot;</span> <span class="o">or</span>  <span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&quot;multiline&quot;</span>

                <span class="nv">val = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="nx">$i</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>

                <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">unset</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span><span class="p">)</span> <span class="k">if</span> <span class="o">!</span><span class="nx">val</span> <span class="o">and</span> <span class="nx">unset</span>

                <span class="nv">p = </span><span class="p">{}</span>
                <span class="nx">p</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span>
                <span class="nx">m</span><span class="p">.</span><span class="nx">set</span> <span class="nx">p</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-11">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-11">&#182;</a>                          </div>                          <p>Sets a model's numeric field: integer and float. These fields are
stored as integer or float respectively.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModelIntFields: </span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nv">$i = </span><span class="nx">$</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>

                <span class="nv">id = </span><span class="nx">$i</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

                <span class="nv">f = </span><span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">getFieldById</span> <span class="nx">id</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">return</span> <span class="nx">unless</span> <span class="o">!</span><span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">or</span> <span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&quot;integer&quot;</span> <span class="o">or</span>
                    <span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&quot;float&quot;</span>

                <span class="nv">val = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="nx">$i</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>

                <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">unset</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span><span class="p">)</span> <span class="k">if</span> <span class="o">!</span><span class="nx">val</span> <span class="o">and</span> <span class="nx">unset</span>

                <span class="nv">p = </span><span class="p">{}</span>
                <span class="nx">p</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span>

                <span class="nx">m</span><span class="p">.</span><span class="nx">set</span> <span class="nx">p</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span> <span class="k">if</span> <span class="nx">val</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-12">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-12">&#182;</a>                          </div>                          <p>Sets a model's dropdown properties. These fields are also
stored as strings.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModelDropdownFields: </span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;select&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nv">$i = </span><span class="nx">$</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>

                <span class="nv">id = </span><span class="nx">$i</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

                <span class="nv">val = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="nx">$i</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>

                <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">unset</span> <span class="nx">id</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span> <span class="k">if</span> <span class="nx">unset</span> <span class="nx">unless</span> <span class="nx">val</span>

                <span class="k">if</span> <span class="nx">val</span> <span class="o">and</span> <span class="nx">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">isnt</span> <span class="s">&quot;&quot;</span>
                    <span class="nv">p = </span><span class="p">{}</span>
                    <span class="nx">p</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span>
                    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">set</span> <span class="nx">p</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-13">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-13">&#182;</a>                          </div>                          <p>Sets a model's date fields. Stored as javascript ISO date strings.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModelDateFields: </span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input[data-type=&quot;date&quot;]&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">),</span> <span class="nf">(i) -&gt;</span>

                <span class="nv">id = </span><span class="nx">$</span><span class="p">(</span><span class="nx">i</span><span class="p">).</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

                <span class="nv">dateValue = </span><span class="k">new</span> <span class="nb">Date</span> <span class="nx">$</span><span class="p">(</span><span class="nx">i</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>

                <span class="nv">o = </span><span class="p">{}</span>
                <span class="nx">o</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">dateValue</span>

                <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">set</span> <span class="nx">o</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span> <span class="nx">unless</span> <span class="nb">isNaN</span> <span class="nx">dateValue</span>

                <span class="nx">m</span><span class="p">.</span><span class="nx">unset</span> <span class="nx">id</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span> <span class="k">if</span> <span class="nx">unset</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-14">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-14">&#182;</a>                          </div>                          <p>Set a model's picture field from the picture HTML element.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModelPicFields: </span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">picFields = </span><span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">getPictures</span><span class="p">()</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">picFields</span><span class="p">,</span> <span class="nf">(pf) -&gt;</span>

                <span class="nv">id = </span><span class="nx">pf</span><span class="p">.</span><span class="nx">id</span>

                <span class="nv">$i = </span><span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">picture&quot;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">)</span>

                <span class="k">return</span> <span class="nx">unless</span> <span class="nx">$i</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;src&#39;</span>

                <span class="nv">o = </span><span class="p">{}</span>
                <span class="nx">o</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$i</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;src&#39;</span>

                <span class="nx">m</span><span class="p">.</span><span class="nx">set</span> <span class="nx">o</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-15">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-15">&#182;</a>                          </div>                          <p>Set a model's facet fields.
Facet fields are multivalue. they will be stored as arrays of strings
in the database, along with a sort field which contains a comma
separated list of facet names, since Solr is not able to sort on
multivalue fields.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModelFacetFields: </span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.facet&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nv">$i = </span><span class="nx">$</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>

                <span class="nv">id = </span><span class="nx">$i</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

                <span class="nv">val = </span><span class="p">[]</span>

                <span class="nv">f = </span><span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">getFieldById</span> <span class="nx">id</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

                <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$i</span><span class="p">.</span><span class="nx">val</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">=&gt;</span>
                    <span class="nx">@setUniqueMultivalueField</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">val</span>

                <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">unset</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span><span class="p">)</span> <span class="k">if</span> <span class="o">!</span><span class="nx">val</span><span class="p">.</span><span class="nx">length</span> <span class="o">and</span> <span class="nx">unset</span>

                <span class="nv">p = </span><span class="p">{}</span>
                <span class="nx">p</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span>

                <span class="nx">m</span><span class="p">.</span><span class="nx">set</span> <span class="nx">p</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span> <span class="k">if</span> <span class="nx">val</span><span class="p">.</span><span class="nx">length</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-16">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-16">&#182;</a>                          </div>                          <p>Sets the tuple property and also the related properties. i.e. for
tuple team:role it also sets team and role properties.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setModelTupleFields: </span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">unset</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.tupleWrapper&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nx">te</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nv">$te     = </span><span class="nx">$</span><span class="p">(</span><span class="nx">te</span><span class="p">)</span>                     <span class="c1"># tuple element</span>
                <span class="nv">tups    = </span><span class="p">[]</span>                        <span class="c1"># list of tuples</span>
                <span class="nv">pval1   = </span><span class="p">[]</span>                        <span class="c1"># vals for related field 1</span>
                <span class="nv">pval2   = </span><span class="p">[]</span>                        <span class="c1"># vals for related field 2</span>
                <span class="nv">p       = </span><span class="p">{}</span>                        <span class="c1"># property obj to be set</span>
                <span class="nv">tid     = </span><span class="nx">$te</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">)</span>            <span class="c1"># name of tuple (team:role)</span>
                <span class="p">[</span> <span class="nx">pid1</span><span class="p">,</span> <span class="nx">pid2</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">tid</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>     <span class="c1"># tuple id part 1 and 2</span>

                <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.tupleField&#39;</span><span class="p">,</span> <span class="nx">$te</span><span class="p">),</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>

                    <span class="nv">$i = </span><span class="nx">$</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>

                    <span class="nv">v1 = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.p1&#39;</span><span class="p">,</span> <span class="nx">$i</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                    <span class="nv">v2 = </span><span class="nx">$</span><span class="p">.</span><span class="nx">trim</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.p2&#39;</span><span class="p">,</span> <span class="nx">$i</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-17">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-17">&#182;</a>                          </div>                          <p>tuple values may contain both parts or just one.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>                    <span class="nv">tv = </span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">v1</span><span class="si">}</span><span class="s">:</span><span class="si">#{</span><span class="nx">v2</span><span class="si">}</span><span class="s">&quot;</span> <span class="k">if</span> <span class="nx">v1</span> <span class="o">or</span> <span class="nx">v2</span>
                    <span class="nx">tups</span><span class="p">.</span><span class="nx">push</span> <span class="nx">tv</span> <span class="k">if</span> <span class="nx">tv</span> <span class="o">and</span> <span class="nx">tups</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">tv</span><span class="p">)</span> <span class="o">is</span> <span class="o">-</span><span class="mi">1</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-18">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-18">&#182;</a>                          </div>                          <p>Aggregate all values from one part and from the other, to
store in the respective fields. It is important that we
only store unique values like 'team/subteam1/group1'
instead of 'team, team/subteam1, team/subteam1/group1'.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>                    <span class="nx">@setUniqueMultivalueField</span> <span class="nx">v1</span><span class="p">,</span> <span class="nx">pval1</span>
                    <span class="nx">@setUniqueMultivalueField</span> <span class="nx">v2</span><span class="p">,</span> <span class="nx">pval2</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-19">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-19">&#182;</a>                          </div>                          <p>Property object contains tuple field and related fields.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>                <span class="nx">p</span><span class="p">[</span><span class="nx">tid</span><span class="p">]</span>  <span class="o">=</span> <span class="nx">tups</span>
                <span class="nx">p</span><span class="p">[</span><span class="nx">pid1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">pval1</span>
                <span class="nx">p</span><span class="p">[</span><span class="nx">pid2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">pval2</span>

                <span class="k">if</span> <span class="o">!</span><span class="nx">pval1</span><span class="p">.</span><span class="nx">length</span> <span class="o">and</span> <span class="o">!</span><span class="nx">pval2</span><span class="p">.</span><span class="nx">length</span> <span class="o">and</span> <span class="nx">unset</span>
                    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">unset</span><span class="p">(</span><span class="nx">tid</span><span class="p">,</span> <span class="nx">silent</span><span class="o">:</span><span class="kc">yes</span><span class="p">)</span>

                <span class="nx">m</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nv">silent: </span><span class="kc">yes</span><span class="p">)</span> <span class="k">if</span> <span class="nx">pval1</span><span class="p">.</span><span class="nx">length</span> <span class="o">or</span> <span class="nx">pval2</span><span class="p">.</span><span class="nx">length</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-20">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-20">&#182;</a>                          </div>                          <p>Propperly removes a pane view by unbinding all events, keybindings
and resetting css clases before removing the actual html element.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">destroy: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">@unbind</span><span class="p">()</span>

            <span class="nx">@unsetKeybindings</span><span class="p">()</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.onProfile&#39;</span><span class="p">).</span><span class="nx">removeClass</span> <span class="s">&#39;onProfile&#39;</span>

            <span class="nx">@remove</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-21">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-21">&#182;</a>                          </div>                          <p>Close the profileView. User clicked on "X" link on top right corner</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">close: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">clearSelection</span><span class="p">()</span>

            <span class="nx">@destroy</span><span class="p">()</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">navigate</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-22">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-22">&#182;</a>                          </div>                          <p>Handle filtering from data values that are part of the facets.
i.e. by clicking on an items profile view data field.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">filterByDetail: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">$e = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>

            <span class="nv">cat = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;data-name&#39;</span>
            <span class="nv">field = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;data-title&#39;</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">setFacetState</span> <span class="p">[</span> <span class="p">{</span> <span class="nv">cat: </span><span class="nx">cat</span><span class="p">,</span> <span class="nv">field: </span><span class="nx">field</span> <span class="p">}</span> <span class="p">]</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">filterByFacet</span><span class="p">()</span>

            <span class="k">return</span> <span class="nx">unless</span> <span class="nx">field</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

            <span class="nv">parentFacet = </span><span class="nx">field</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">facetOpenState</span><span class="p">.</span><span class="nx">set</span> <span class="p">[</span> <span class="p">{</span> <span class="nv">cat: </span><span class="nx">cat</span><span class="p">,</span> <span class="nv">field: </span><span class="nx">parentFacet</span> <span class="p">}</span> <span class="p">]</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-23">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-23">&#182;</a>                          </div>                          <p>Appends unique values to a given array, based on a comma separated
list of values. Unique values refer to values such as:
'team/subteam1/group1' instead of
'team, team/subteam1, team/subteam1/group1'</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setUniqueMultivalueField: </span><span class="nf">(list, arr) -&gt;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">@getMultivalueField</span><span class="p">(</span><span class="nx">list</span><span class="p">),</span> <span class="nf">(v) -&gt;</span>

                <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span> <span class="nx">v</span> <span class="k">if</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">is</span> <span class="o">-</span><span class="mi">1</span> <span class="o">and</span> <span class="nx">v</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-24">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-24">&#182;</a>                          </div>                          <p>Parse an input field that has multiple values and form an array of
unique values useful for Solr.
i.e. Novel/Sci-Fi => [ 'Novel', 'Novel/Sci-Fi' ]</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">getMultivalueField: </span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">uniqueFields = </span><span class="p">[]</span>

            <span class="nv">values = </span><span class="nx">field</span><span class="p">.</span><span class="nx">split</span> <span class="s">&#39;,&#39;</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">values</span><span class="p">,</span> <span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nv">v = </span><span class="nx">v</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="nx">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">is</span> <span class="s">&#39; &#39;</span>

                <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">@getUniqueValues</span><span class="p">(</span><span class="nx">v</span><span class="p">),</span> <span class="nf">(v) -&gt;</span>

                    <span class="nx">uniqueFields</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="k">if</span> <span class="nx">uniqueFields</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">is</span> <span class="o">-</span><span class="mi">1</span>

            <span class="nx">uniqueFields</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-25">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-25">&#182;</a>                          </div>                          <p>Given a value like Team/subteam1/group1 returns a list of values like
team, team/subteam1, team/subteam1/group1.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">getUniqueValues: </span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">uniqueValues = </span><span class="p">[]</span>

            <span class="nv">sep = </span><span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">separator</span>
            <span class="nv">tokens = </span><span class="nx">value</span><span class="p">.</span><span class="nx">split</span> <span class="nx">sep</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="nx">sep</span><span class="p">),</span> <span class="nf">(v, i) -&gt;</span>

                <span class="nv">u = </span><span class="nx">tokens</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">sep</span><span class="p">)</span>

                <span class="nx">uniqueValues</span><span class="p">.</span><span class="nx">push</span> <span class="nx">u</span> <span class="k">if</span> <span class="nx">u</span>

            <span class="nx">uniqueValues</span><span class="p">.</span><span class="nx">push</span> <span class="nx">value</span>

            <span class="nx">uniqueValues</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-26">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-26">&#182;</a>                          </div>                          <p>Append another tuple fields after last one</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">addTupleField: </span><span class="nf">(e) -&gt;</span>

            <span class="nv">$e = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>

            <span class="k">return</span> <span class="nx">unless</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.p1&#39;</span><span class="p">,</span> <span class="nx">$e</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">or</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.p2&#39;</span><span class="p">,</span> <span class="nx">$e</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>

            <span class="nv">$p = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">parent</span><span class="p">()</span>

            <span class="nv">tupleId = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

            <span class="nv">template = </span><span class="nx">_</span><span class="p">.</span><span class="nx">template</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#tuple-field-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()</span>

            <span class="nx">$p</span><span class="p">.</span><span class="nx">append</span> <span class="nx">template</span> <span class="nv">id: </span><span class="nx">tupleId</span>

            <span class="nx">@setAutoComplete</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.autocomplete&#39;</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-27">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-27">&#182;</a>                          </div>                          <p>Self explanatory</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">removeEmptyTupleFields: </span><span class="nf">(e) -&gt;</span>

            <span class="nv">$tf = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;.tupleField&#39;</span><span class="p">)</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$tf</span><span class="p">,</span> <span class="nf">(t, i, tf) -&gt;</span>

                <span class="nv">$t = </span><span class="nx">$</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
                <span class="nv">$i1 = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;.p1&#39;</span><span class="p">,</span> <span class="nx">$t</span><span class="p">)</span>
                <span class="nv">$i2 = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;.p2&#39;</span><span class="p">,</span> <span class="nx">$t</span><span class="p">)</span>

                <span class="nx">$t</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span> <span class="nx">unless</span> <span class="nx">$i1</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">or</span> <span class="nx">$i2</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">or</span> <span class="nx">i</span> <span class="o">is</span> <span class="nx">tf</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-28">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-28">&#182;</a>                          </div>                          <p>Easy validation. Checks for values on any input field and matches
for emails on email input fields</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">formIsValid: </span><span class="nf">() -&gt;</span>

            <span class="nv">validForm = </span><span class="kc">true</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.validationFailed&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&#39;validationFailed&#39;</span><span class="p">)</span>

            <span class="nv">inputFields = </span><span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">getMandatories</span><span class="p">()</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">inputFields</span><span class="p">,</span> <span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">fields</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nv">validField = </span><span class="kc">true</span>

                <span class="nv">input = </span><span class="nx">$</span><span class="p">(</span><span class="s">&quot;input</span><span class="err">#</span><span class="si">#{</span><span class="nx">f</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="err">#</span><span class="s">pane&quot;</span><span class="p">)</span>

                <span class="nv">validField = </span><span class="kc">false</span> <span class="k">if</span> <span class="o">!</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>

                <span class="nv">validField = </span><span class="kc">false</span> <span class="k">if</span> <span class="nx">f</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&#39;email&#39;</span> <span class="o">and</span>
                    <span class="o">!</span><span class="nx">@emailValid</span> <span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span>

                <span class="nx">input</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;validationFailed&#39;</span><span class="p">)</span> <span class="nx">unless</span> <span class="nx">validField</span>

                <span class="nv">validForm = </span><span class="kc">false</span> <span class="nx">unless</span> <span class="nx">validField</span>

            <span class="nx">validForm</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-29">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-29">&#182;</a>                          </div>                          <p>Email validation, match against a regexp.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">emailValid: </span><span class="nf">(email) -&gt;</span>

            <span class="nv">re = </span><span class="p">[</span> <span class="s">&#39;^(([^&lt;&gt;()[\\]\\.,;:\\s@\\&quot;]&#39;</span>
                <span class="p">,</span> <span class="s">&#39;+(\.[^&lt;&gt;()[\\]\\.,;:\\s@\\&quot;]+)*)&#39;</span>
                <span class="p">,</span> <span class="s">&#39;|(\\&quot;.+\\&quot;))@((\\[[0-9]{1,3}\\.&#39;</span>
                <span class="p">,</span> <span class="s">&#39;[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])&#39;</span>
                <span class="p">,</span> <span class="s">&#39;|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$&#39;</span> <span class="p">]</span>

            <span class="nv">re = </span><span class="nb">RegExp</span> <span class="nx">re</span><span class="p">.</span><span class="nx">join</span> <span class="s">&#39;&#39;</span>

            <span class="nx">re</span><span class="p">.</span><span class="nx">test</span> <span class="nx">email</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-30">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-30">&#182;</a>                          </div>                          <p>Attach autocomplete plugin to input fields (i.e. team, role).
There must be a resource to get an array with the values. The name of
the resource should match the id of the html element.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setAutoComplete: </span><span class="nf">($elements) -&gt;</span>

            <span class="nx">$</span><span class="p">.</span><span class="nx">get</span> <span class="s">&#39;ufacets&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">fd</span><span class="p">)</span> <span class="o">=&gt;</span>

                <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">$elements</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

                    <span class="nv">$e = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
                    <span class="nv">id = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>
                    <span class="nv">id = </span><span class="nx">id</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nx">$e</span><span class="p">.</span><span class="nx">hasClass</span> <span class="s">&#39;p1&#39;</span>
                    <span class="nv">id = </span><span class="nx">id</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="nx">$e</span><span class="p">.</span><span class="nx">hasClass</span> <span class="s">&#39;p2&#39;</span>

                    <span class="nx">$e</span><span class="p">.</span><span class="nx">autocomplete</span> <span class="nv">source: </span><span class="nx">fd</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-31">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-31">&#182;</a>                          </div>                          <p>Attach fileupload plugin to picture input field.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setFileupload: </span><span class="nf">($e) -&gt;</span>

            <span class="nx">$e</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;data-url&#39;</span><span class="p">,</span> <span class="s">&quot;/</span><span class="si">#{</span><span class="nb">window</span><span class="p">.</span><span class="nx">entity</span><span class="si">}</span><span class="s">/picture/&quot;</span>

            <span class="nx">$e</span><span class="p">.</span><span class="nx">fileupload</span>
                <span class="nv">dataType: </span><span class="s">&#39;json&#39;</span>
                <span class="nv">done: </span><span class="nf">($e, data) -&gt;</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span> <span class="nf">(index, file) -&gt;</span>
                        <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#picture&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;src&#39;</span><span class="p">,</span> <span class="nx">file</span><span class="p">.</span><span class="nx">url</span><span class="p">).</span><span class="nx">one</span> <span class="s">&#39;load&#39;</span><span class="p">,</span> <span class="nf">() -&gt;</span>
                            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#pictureContainer&#39;</span><span class="p">)</span>
                                <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&#39;validationFailed&#39;</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-32">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-32">&#182;</a>                          </div>                          <p>Attach datepicker plugin to a given input field</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setDatePicker: </span><span class="nf">($e) -&gt;</span>

            <span class="nx">$e</span><span class="p">.</span><span class="nx">datepicker</span>

                <span class="nv">changeYear      : </span><span class="kc">true</span>
                <span class="nv">changeMonth     : </span><span class="kc">true</span>
                <span class="nv">constrainInput  : </span><span class="kc">true</span>
                <span class="nv">showButtonPanel : </span><span class="kc">true</span>
                <span class="nv">showOtherMonths : </span><span class="kc">true</span>
                <span class="nv">yearRange       : </span><span class="s">&quot;c-70&quot;</span>
                <span class="nv">dateFormat      : </span><span class="s">&quot;d M yy&quot;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-33">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-33">&#182;</a>                          </div>                          <p>Attach keybinding handlers like close on ESC and arrow keys.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setKeybindings: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">@unsetKeybindings</span><span class="p">()</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;body&#39;</span><span class="p">).</span><span class="nx">keyup</span> <span class="nx">@closeOnEsc</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-34">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-34">&#182;</a>                          </div>                          <p>Close profile view when user hits ESC key</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">closeOnEsc: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">@close</span><span class="p">()</span> <span class="k">if</span> <span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">is</span> <span class="mi">27</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-35">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-35">&#182;</a>                          </div>                          <p>Dettach all pane keybindings on body</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">unsetKeybindings: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;body&#39;</span><span class="p">).</span><span class="nx">unbind</span> <span class="s">&#39;keyup&#39;</span><span class="p">,</span> <span class="nx">@closeOnEsc</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-36">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-36">&#182;</a>                          </div>                          <p>Stop animation if mouse leaves arrows</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">onMouseOut: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">clearTimeout</span> <span class="nx">@scrollTimer</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-37">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-37">&#182;</a>                          </div>                          <p>Stop animation if mouse enters the text container</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">onTextContainer: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">clearTimeout</span> <span class="nx">@scrollTimer</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-38">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-38">&#182;</a>                          </div>                          <p>Reset text position to left:0 after the cursor has left for 2 seconds</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">onTextContainerOut: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nx">clearTimeout</span> <span class="nx">@scrollTimer</span>

            <span class="vi">@scrollTimer = </span><span class="nx">setTimeout</span> <span class="p">()</span> <span class="o">=&gt;</span>
                <span class="nx">@resetTextPosition</span> <span class="nx">e</span>
                <span class="p">,</span> <span class="mi">2000</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-39">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-39">&#182;</a>                          </div>                          <p>Handle animation to reset the text to left:0.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">resetTextPosition: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">$e = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>

            <span class="nx">clearTimeout</span> <span class="nx">@scrollTimeout</span>

            <span class="k">return</span> <span class="k">if</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">$e</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;px&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">0</span>

            <span class="vi">@scrollTimeout = </span><span class="nx">setTimeout</span> <span class="p">()</span> <span class="o">=&gt;</span>
                <span class="nx">@resetTextPosition</span> <span class="nx">e</span>
                <span class="p">,</span> <span class="mi">1</span>

            <span class="nx">@animateText</span> <span class="nx">$e</span><span class="p">,</span> <span class="s">&#39;left&#39;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-40">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-40">&#182;</a>                          </div>                          <p>Handles animation on text with directions 'left' or 'right'.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">animateText: </span><span class="p">(</span><span class="nx">$e</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">x = </span><span class="nb">parseFloat</span> <span class="nx">$e</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;px&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">return</span> <span class="nx">$e</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;px&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nx">dir</span> <span class="o">is</span> <span class="s">&#39;left&#39;</span>

            <span class="nx">$e</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;px&#39;</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-41">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-41">&#182;</a>                          </div>                          <p>Handles scrolling of long detailed data fields, showing arrows on
sides of data fields and taking care of animations.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">onScroll: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">$e = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">)</span>
            <span class="nv">$p = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">siblings</span><span class="p">(</span><span class="s">&#39;.text-container&#39;</span><span class="p">)</span>
            <span class="nv">w = </span><span class="nb">parseFloat</span> <span class="nx">$p</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;width&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;px&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="nv">x = </span><span class="nb">parseFloat</span> <span class="nx">$p</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;px&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

            <span class="nx">clearTimeout</span> <span class="nx">@scrollTimer</span>

            <span class="vi">@scrollTimer = </span><span class="nx">setTimeout</span> <span class="p">()</span> <span class="o">=&gt;</span>
                <span class="nx">@onScroll</span> <span class="nx">e</span>
              <span class="p">,</span>
                <span class="mi">10</span>

            <span class="nv">id = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;span.scroll#left, span.scroll#right&#39;</span><span class="p">,</span> <span class="nx">$p</span><span class="p">.</span><span class="nx">parent</span><span class="p">()).</span><span class="nx">show</span><span class="p">()</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;span.scroll#left&#39;</span><span class="p">,</span> <span class="nx">$p</span><span class="p">.</span><span class="nx">parent</span><span class="p">()).</span><span class="nx">hide</span><span class="p">()</span> <span class="k">if</span> <span class="nx">x</span> <span class="o">is</span> <span class="mi">0</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;span.scroll#right&#39;</span><span class="p">,</span> <span class="nx">$p</span><span class="p">.</span><span class="nx">parent</span><span class="p">()).</span><span class="nx">hide</span><span class="p">()</span> <span class="k">if</span> <span class="nx">x</span> <span class="o">is</span> <span class="p">(</span><span class="nx">w</span> <span class="o">-</span> <span class="mi">188</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;span.scroll#right&#39;</span><span class="p">,</span> <span class="nx">$p</span><span class="p">.</span><span class="nx">parent</span><span class="p">()).</span><span class="nx">hide</span><span class="p">()</span> <span class="k">if</span> <span class="nx">w</span> <span class="o">&lt;</span> <span class="mi">178</span>

            <span class="k">if</span> <span class="nx">id</span> <span class="o">is</span> <span class="s">&#39;left&#39;</span> <span class="o">and</span> <span class="nx">x</span> <span class="o">&gt;=</span> <span class="mi">0</span>
                <span class="k">return</span> <span class="nx">clearTimeout</span> <span class="nx">@scrollTimer</span>
            <span class="k">if</span> <span class="nx">id</span> <span class="o">is</span> <span class="s">&#39;right&#39;</span><span class="o">and</span> <span class="nx">x</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="nx">w</span> <span class="o">-</span> <span class="mi">168</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">return</span> <span class="nx">clearTimeout</span> <span class="nx">@scrollTimer</span>
            <span class="nx">@animateText</span> <span class="nx">$p</span><span class="p">,</span> <span class="nx">id</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-42">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-42">&#182;</a>                          </div>                          <h3 id="profileview">Profile View</h3>

<p>A detailed view of an item that shows up on the right pane.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>    <span class="k">class</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ProfileView</span> <span class="k">extends</span> <span class="nb">window</span><span class="p">.</span><span class="nx">BasePaneView</span>

        <span class="nv">tagName: </span><span class="s">&#39;div&#39;</span>


        <span class="nv">template: </span><span class="nx">_</span><span class="p">.</span><span class="nx">template</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#details-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()</span>


        <span class="nv">events:</span>

            <span class="s">&quot;click a</span><span class="err">#</span><span class="s">edit&quot;</span>                  <span class="o">:</span> <span class="s">&quot;form&quot;</span>
            <span class="s">&quot;click a</span><span class="err">#</span><span class="s">save&quot;</span>                  <span class="o">:</span> <span class="s">&quot;save&quot;</span>
            <span class="s">&quot;click a</span><span class="err">#</span><span class="s">delete&quot;</span>                <span class="o">:</span> <span class="s">&quot;clear&quot;</span>
            <span class="s">&quot;click a.destroy&quot;</span>               <span class="o">:</span> <span class="s">&quot;close&quot;</span>
            <span class="s">&quot;click label.additional&quot;</span>        <span class="o">:</span> <span class="s">&quot;showAdditionalFields&quot;</span>
            <span class="s">&quot;mouseover span.scroll&quot;</span>         <span class="o">:</span> <span class="s">&quot;onScroll&quot;</span>
            <span class="s">&quot;mouseout span.scroll&quot;</span>          <span class="o">:</span> <span class="s">&quot;onMouseOut&quot;</span>
            <span class="s">&quot;mouseover .text-container&quot;</span>     <span class="o">:</span> <span class="s">&quot;onTextContainer&quot;</span>
            <span class="s">&quot;mouseout .text-container&quot;</span>      <span class="o">:</span> <span class="s">&quot;onTextContainerOut&quot;</span>
            <span class="s">&quot;click a.filter&quot;</span>                <span class="o">:</span> <span class="s">&quot;filterByDetail&quot;</span>
            <span class="s">&quot;keyup .tupleField:last-child&quot;</span>  <span class="o">:</span> <span class="s">&quot;addTupleField&quot;</span>
            <span class="s">&quot;focus .tupleField&quot;</span>             <span class="o">:</span> <span class="s">&quot;removeEmptyTupleFields&quot;</span>
            <span class="s">&quot;keypress&quot;</span>                      <span class="o">:</span> <span class="s">&quot;save&quot;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-43">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-43">&#182;</a>                          </div>                          <p>Initialize profile view by destroying previous views, binding to
important events and moving the content area to make some space.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">initialize: </span><span class="nf">() -&gt;</span>

            <span class="k">super</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-44">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-44">&#182;</a>                          </div>                          <p>Destroy all previous profileViews</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">profileView</span><span class="o">?</span><span class="p">.</span><span class="nx">destroy</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-45">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-45">&#182;</a>                          </div>                          <p>Bindings for items collection</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nb">window</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">bind</span> <span class="s">&#39;reset&#39;</span><span class="p">,</span> <span class="nx">@onReset</span><span class="p">,</span> <span class="nx">@</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-46">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-46">&#182;</a>                          </div>                          <p>Bindings for the changes on the collection after a search</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">@app</span><span class="p">.</span><span class="nx">bind</span> <span class="s">&#39;filter&#39;</span><span class="p">,</span> <span class="nx">@close</span><span class="p">,</span> <span class="nx">@</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-47">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-47">&#182;</a>                          </div>                          <p>Move right border of content area to make some space for
the profile.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.thumbnailContainer&#39;</span><span class="p">).</span><span class="nx">addClass</span> <span class="s">&#39;onProfile&#39;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-48">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-48">&#182;</a>                          </div>                          <p>Render profile inside #pane</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">render: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">@$el</span><span class="p">.</span><span class="nx">html</span> <span class="nx">@template</span> <span class="nv">m: </span><span class="nx">@model</span>
            <span class="nx">@</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-49">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-49">&#182;</a>                          </div>                          <p>Delete an item</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">clear: </span><span class="nf">() -&gt;</span>

            <span class="k">return</span> <span class="nx">unless</span> <span class="nx">confirm</span><span class="p">(</span><span class="s">&#39;Do you want to delete?&#39;</span><span class="p">)</span>

            <span class="nx">@destroy</span><span class="p">()</span>
            <span class="nx">@model</span><span class="p">.</span><span class="nx">clear</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-50">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-50">&#182;</a>                          </div>                          <p>Close a profile view. Unbind, destroy, remove element and bring
content area back to right 0.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">close: </span><span class="nf">() -&gt;</span>
            <span class="k">super</span>
            <span class="nx">@app</span><span class="p">.</span><span class="nx">profileClosed</span><span class="p">()</span>
            <span class="nx">@app</span><span class="p">.</span><span class="nx">showPaneView</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-51">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-51">&#182;</a>                          </div>                          <p>Propperly unbind and remove a profileView without removing the
html element.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">destroy: </span><span class="p">()</span> <span class="o">=&gt;</span>
            <span class="k">super</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">unbind</span> <span class="s">&#39;reset&#39;</span><span class="p">,</span> <span class="nx">@onReset</span><span class="p">,</span> <span class="nx">@</span>
            <span class="nx">@app</span><span class="p">.</span><span class="nx">unbind</span> <span class="s">&#39;filter&#39;</span><span class="p">,</span> <span class="nx">@destroy</span><span class="p">,</span> <span class="nx">@</span>
            <span class="nb">window</span><span class="p">.</span><span class="nv">profileView = </span><span class="kc">null</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-52">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-52">&#182;</a>                          </div>                          <p>When the Items collection fires a reset (usually after a refetch),
hide the profileView if the item is not anymore in the collection.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">onReset: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">@destroy</span><span class="p">()</span> <span class="nx">unless</span> <span class="nb">window</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">get</span> <span class="nx">@model</span><span class="p">.</span><span class="nx">id</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-53">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-53">&#182;</a>                          </div>                          <p>Initialize form elements to create/update an item</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">form: </span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="o">=&gt;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-54">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-54">&#182;</a>                          </div>                          <p>Enable editing for additional fields, picture or all fields if
admin key is present</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="k">if</span> <span class="nx">@app</span><span class="p">.</span><span class="nx">isAdmin</span><span class="p">()</span>

                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;a.text-overlay&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.hidden&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">removeClass</span> <span class="s">&#39;hidden&#39;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.multiline&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;edit&#39;</span><span class="p">).</span><span class="nx">removeAttr</span> <span class="s">&#39;style&#39;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;select&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;edit&#39;</span><span class="p">).</span><span class="nx">removeAttr</span> <span class="s">&#39;disabled&#39;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.text-container.tuple&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.multilineWrapp p&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;textarea&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s">&#39;disabled&#39;</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;edit&#39;</span><span class="p">)</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.tupleWrapper&#39;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&#39;hidden&#39;</span><span class="p">)</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&#39;a.link&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-55">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-55">&#182;</a>                          </div>                          <p>Enable additional fields. No admin key required.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nv">$a = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;#pane li.additional&#39;</span><span class="p">)</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;a.text-overlay&#39;</span><span class="p">,</span> <span class="nx">$a</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.hidden&#39;</span><span class="p">,</span> <span class="nx">$a</span><span class="p">).</span><span class="nx">removeClass</span> <span class="s">&#39;hidden&#39;</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;select&#39;</span><span class="p">,</span> <span class="nx">$a</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;edit&#39;</span><span class="p">).</span><span class="nx">removeAttr</span> <span class="s">&#39;disabled&#39;</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;.multilineWrapp p&#39;</span><span class="p">,</span> <span class="nx">$a</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;textarea&#39;</span><span class="p">,</span> <span class="nx">$a</span><span class="p">).</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s">&#39;disabled&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;edit&#39;</span><span class="p">)</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;a.link&#39;</span><span class="p">,</span> <span class="nx">$a</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-56">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-56">&#182;</a>                          </div>                          <p>Enable picture field</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input#pic&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;editing&#39;</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span><span class="s">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#pictureContainer p&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-57">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-57">&#182;</a>                          </div>                          <p>Show additional fields</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="s">&#39;#pane li.additional&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;open&#39;</span><span class="p">)</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;span#arrow&#39;</span><span class="p">,</span> <span class="s">&#39;#pane li&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&#39;active&#39;</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-58">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-58">&#182;</a>                          </div>                          <p>Highlight mandatory fields</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">@setMandatoryLabels</span><span class="p">()</span> <span class="k">if</span> <span class="nx">@app</span><span class="p">.</span><span class="nx">isAdmin</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-59">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-59">&#182;</a>                          </div>                          <p>Set useful jquery plugins</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">@setAutoComplete</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.autocomplete&#39;</span><span class="p">)</span>
            <span class="nx">@setFileupload</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input#pic&#39;</span><span class="p">)</span>
            <span class="nx">@setDatePicker</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input[data-type=&quot;date&quot;]&#39;</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-60">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-60">&#182;</a>                          </div>                          <p>Unset keybindings to avoid closing profile on arrow-keys.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">@app</span><span class="p">.</span><span class="nx">unsetMoveKeybindings</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-61">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-61">&#182;</a>                          </div>                          <p>Set height of multiline fields.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">@setMultilineHeight</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-62">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-62">&#182;</a>                          </div>                          <p>Prepare buttons for edit state (show Save).</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#buttons a&#39;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;a#save&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s">&#39;display&#39;</span><span class="p">,</span> <span class="s">&#39;inline-block&#39;</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-63">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-63">&#182;</a>                          </div>                          <p>Saves a new item or updates an older item if data is valid</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">save: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="k">if</span> <span class="nx">e</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">or</span> <span class="nx">e</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">is</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">return</span> <span class="nx">unless</span> <span class="nx">e</span><span class="p">.</span><span class="nx">which</span> <span class="o">is</span> <span class="mi">13</span>

            <span class="k">return</span> <span class="nx">unless</span> <span class="nx">@formIsValid</span><span class="p">()</span>

            <span class="k">return</span> <span class="nx">@create</span><span class="p">()</span> <span class="nx">unless</span> <span class="nx">@model</span><span class="p">.</span><span class="nx">id</span>

            <span class="nx">@update</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-64">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-64">&#182;</a>                          </div>                          <p>Creates a new item in the items collection avoiding several clicks
to trigger a create() many times.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">create: </span><span class="nx">_</span><span class="p">.</span><span class="nx">debounce</span><span class="p">(</span><span class="nf">() -&gt;</span>

            <span class="nv">unset = </span><span class="kc">yes</span>

            <span class="nx">@setModel</span> <span class="nx">@model</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nb">window</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">create</span> <span class="nx">@model</span><span class="p">,</span> <span class="nv">wait: </span><span class="kc">yes</span><span class="p">,</span>
                <span class="nv">success: </span><span class="p">()</span> <span class="o">=&gt;</span>
                    <span class="nx">@app</span><span class="p">.</span><span class="nx">hideError</span><span class="p">()</span>
                    <span class="nx">@app</span><span class="p">.</span><span class="nx">navigate</span><span class="p">()</span>
                <span class="p">,</span>
                <span class="nv">error: </span><span class="p">()</span> <span class="o">=&gt;</span>
                    <span class="nx">@app</span><span class="p">.</span><span class="nx">showError</span><span class="p">()</span>
        <span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-65">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-65">&#182;</a>                          </div>                          <p>Update an item with the new changes on the input fields. If an input
field is empty, the property gets removed from the item object.
Only the optional fields are changable without an admin key!</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">update: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">unset = </span><span class="kc">yes</span>

            <span class="nx">@setModel</span> <span class="nx">@model</span><span class="p">,</span> <span class="nx">unset</span>

            <span class="nx">@model</span><span class="p">.</span><span class="nx">save</span> <span class="p">{},</span> <span class="nv">wait: </span><span class="kc">yes</span><span class="p">,</span> <span class="nv">error: </span><span class="nf">() -&gt;</span>
                <span class="nb">window</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">showError</span><span class="p">()</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">navigate</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-66">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-66">&#182;</a>                          </div>                          <p>Addition fields section of the profile view, expand and collapse!</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">showAdditionalFields: </span><span class="nf">() -&gt;</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;ul&#39;</span><span class="p">,</span> <span class="s">&#39;#pane li.additional&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s">&#39;open&#39;</span><span class="p">)</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;span#arrow&#39;</span><span class="p">,</span> <span class="s">&#39;#pane li&#39;</span><span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span><span class="s">&#39;active&#39;</span><span class="p">)</span>

            <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nv">additionalOpen = </span><span class="kc">yes</span> <span class="k">if</span> <span class="nb">window</span><span class="p">.</span><span class="nx">additionalOpen</span> <span class="o">is</span> <span class="kc">no</span>

            <span class="nb">window</span><span class="p">.</span><span class="nv">additionalOpen = </span><span class="kc">no</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-67">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-67">&#182;</a>                          </div>                          <p>Add class mandatory to respective fields</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setMandatoryLabels: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nv">mandatoryFields = </span><span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">getMandatories</span><span class="p">()</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">mandatoryFields</span><span class="p">,</span> <span class="p">(</span><span class="nx">l</span><span class="p">)</span> <span class="o">=&gt;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&quot;label[for=&#39;</span><span class="si">#{</span><span class="nx">l</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="s">&#39;]&quot;</span><span class="p">).</span><span class="nx">addClass</span> <span class="s">&#39;mandatory&#39;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-68">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-68">&#182;</a>                          </div>                          <p>Sets the height for the textareas on the profile view.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">setMultilineHeight: </span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">item = </span><span class="nx">@model</span>

            <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nb">window</span><span class="p">.</span><span class="nx">Settings</span><span class="p">.</span><span class="nx">Schema</span><span class="p">.</span><span class="nx">getMultilines</span><span class="p">(),</span> <span class="nf">(m) -&gt;</span>

                <span class="nv">value = </span><span class="nx">item</span><span class="p">.</span><span class="nx">get</span> <span class="nx">m</span><span class="p">.</span><span class="nx">id</span>
                <span class="k">return</span> <span class="nx">unless</span> <span class="nx">value</span>

                <span class="nv">cols = </span><span class="nx">$</span><span class="p">(</span><span class="s">&quot;textarea</span><span class="err">#</span><span class="si">#{</span><span class="nx">m</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">attr</span> <span class="s">&#39;cols&#39;</span>
                <span class="nv">lc = </span><span class="mi">0</span>

                <span class="nx">_</span><span class="p">.</span><span class="nx">each</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s">&#39;\n&#39;</span><span class="p">),</span> <span class="nf">(l) -&gt;</span>
                    <span class="nx">lc</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span> <span class="nx">l</span><span class="p">.</span><span class="nx">length</span><span class="o">/</span><span class="nx">cols</span>

                <span class="nv">h = </span><span class="nx">$</span><span class="p">(</span><span class="s">&quot;textarea</span><span class="err">#</span><span class="si">#{</span><span class="nx">m</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">prop</span> <span class="s">&#39;scrollHeight&#39;</span>
                <span class="nx">$</span><span class="p">(</span><span class="s">&quot;textarea</span><span class="err">#</span><span class="si">#{</span><span class="nx">m</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&#39;#pane&#39;</span><span class="p">).</span><span class="nx">height</span> <span class="nx">h</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-69">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-69">&#182;</a>                          </div>                          <h3 id="groupview">Group view</h3>

<p>Shows a selection of items. Allows for edition of multiple items at once,
export to CSV, create calendar, conference in Skype, etc</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>    <span class="k">class</span> <span class="nb">window</span><span class="p">.</span><span class="nx">GroupView</span> <span class="k">extends</span> <span class="nb">window</span><span class="p">.</span><span class="nx">BasePaneView</span>

        <span class="nv">events:</span>

            <span class="s">&quot;click a.destroy&quot;</span>                         <span class="o">:</span> <span class="s">&quot;close&quot;</span>
            <span class="s">&quot;click a.minidestroy&quot;</span>                     <span class="o">:</span> <span class="s">&quot;removeSelected&quot;</span>
            <span class="s">&quot;click </span><span class="err">#</span><span class="s">groupActions a</span><span class="err">#</span><span class="s">csv.btn&quot;</span>           <span class="o">:</span> <span class="s">&quot;linkToCSV&quot;</span>
            <span class="s">&quot;click </span><span class="err">#</span><span class="s">groupActions a</span><span class="err">#</span><span class="s">edit.btn&quot;</span>          <span class="o">:</span> <span class="s">&quot;multipleEdit&quot;</span>
            <span class="s">&quot;click </span><span class="err">#</span><span class="s">multipleEditActions a</span><span class="err">#</span><span class="s">cancel.btn&quot;</span> <span class="o">:</span> <span class="s">&quot;closeEdit&quot;</span>
            <span class="s">&quot;click </span><span class="err">#</span><span class="s">multipleEditActions a</span><span class="err">#</span><span class="s">save.btn&quot;</span>   <span class="o">:</span> <span class="s">&quot;save&quot;</span>
            <span class="s">&quot;keypress&quot;</span>                                <span class="o">:</span> <span class="s">&quot;save&quot;</span>
            <span class="s">&quot;keyup .tupleField:last-child&quot;</span>            <span class="o">:</span> <span class="s">&quot;addTupleField&quot;</span>
            <span class="s">&quot;focus .tupleField&quot;</span>                       <span class="o">:</span> <span class="s">&quot;removeEmptyTupleFields&quot;</span>


        <span class="nv">template: </span><span class="nx">_</span><span class="p">.</span><span class="nx">template</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#group-template&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-70">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-70">&#182;</a>                          </div>                          <p>Render view by passing an array of ids and an array of emails for
the calendar function</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">render: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">@$el</span><span class="p">.</span><span class="nx">html</span> <span class="nx">@template</span> <span class="nv">m: </span><span class="nx">@app</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">,</span> <span class="nv">calendar: </span><span class="nx">@gCalendarURL</span><span class="p">()</span>
            <span class="nx">@</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-71">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-71">&#182;</a>                          </div>                          <p>Close group view. Unbind and destroys html element.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">close: </span><span class="nf">() -&gt;</span>

            <span class="k">super</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">showPaneView</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-72">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-72">&#182;</a>                          </div>                          <p>Destroy and navigate to new state without group view</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">destroy: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="k">super</span>

            <span class="nb">window</span><span class="p">.</span><span class="nv">groupView = </span><span class="kc">null</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">navigate</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-73">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-73">&#182;</a>                          </div>                          <h3 id="multipleedition">Multiple edition</h3>

<ol>
<li>Show multiple edition form</li>
<li>Hide other action buttons</li>
<li>Set autocomplete on input fields</li>
<li>Set date pickers</li>
<li>Unset arrow key movement bindings</li>
</ol>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">multipleEdit: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#itemsContainer&#39;</span><span class="p">).</span><span class="nx">addClass</span> <span class="s">&#39;onEdit&#39;</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#multipleEditFields, #multipleEditActions&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#groupActions&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>

            <span class="nx">@setAutoComplete</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input.autocomplete&#39;</span><span class="p">)</span>
            <span class="nx">@setDatePicker</span> <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input[data-type=&quot;date&quot;]&#39;</span><span class="p">)</span>
            <span class="nx">@app</span><span class="p">.</span><span class="nx">unsetMoveKeybindings</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-74">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-74">&#182;</a>                          </div>                          <h3 id="savemultipleitems">Save multiple items</h3>

<p>1.- Unbinds 'sync' events from models until all models are changed.
2.- Show a warning before applying changes
3.- Set model properties for each item
4.- Rebind 'sync' events
5.- Refetch colection</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">save: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="k">if</span> <span class="nx">e</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">or</span> <span class="nx">e</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">is</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">return</span> <span class="nx">unless</span> <span class="nx">e</span><span class="p">.</span><span class="nx">which</span> <span class="o">is</span> <span class="mi">13</span>

            <span class="nv">amount = </span><span class="nx">@app</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">.</span><span class="nx">length</span>
            <span class="nv">warning = </span><span class="s">&quot;Proceed to apply changes to </span><span class="si">#{</span><span class="nx">amount</span><span class="si">}</span><span class="s"> &quot;</span>
            <span class="nx">warning</span> <span class="o">+=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">getItemType</span><span class="p">()</span>
            <span class="k">return</span> <span class="nx">unless</span> <span class="nx">confirm</span> <span class="nx">warning</span>

            <span class="nv">cb = </span><span class="nx">_</span><span class="p">.</span><span class="nx">after</span> <span class="nx">@app</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span>
                <span class="nx">@app</span><span class="p">.</span><span class="nx">fetchFacet</span> <span class="p">()</span> <span class="o">=&gt;</span>
                    <span class="nx">@app</span><span class="p">.</span><span class="nx">fetchItems</span>
                        <span class="nv">data: </span><span class="nx">@app</span><span class="p">.</span><span class="nx">getFilterQS</span><span class="p">()</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">.</span><span class="nx">each</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span>
                <span class="nx">m</span><span class="p">.</span><span class="nx">unbind</span> <span class="s">&#39;sync&#39;</span><span class="p">,</span> <span class="nx">@app</span><span class="p">.</span><span class="nx">updateFacets</span>

                <span class="nx">@setModel</span> <span class="nx">m</span><span class="p">,</span> <span class="kc">no</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span>
                    <span class="nx">m</span><span class="p">.</span><span class="nx">save</span> <span class="p">{},</span>
                      <span class="nv">wait: </span><span class="kc">yes</span><span class="p">,</span>
                      <span class="nv">url: </span><span class="nx">m</span><span class="p">.</span><span class="nx">url</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#39;?admin=yes&#39;</span><span class="p">,</span>
                      <span class="nv">success: </span><span class="p">()</span> <span class="o">=&gt;</span>
                          <span class="nx">@app</span><span class="p">.</span><span class="nx">hideError</span><span class="p">()</span>
                          <span class="nx">m</span><span class="p">.</span><span class="nx">bind</span> <span class="s">&#39;sync&#39;</span><span class="p">,</span> <span class="nx">@app</span><span class="p">.</span><span class="nx">updateFacets</span>
                          <span class="nx">cb</span><span class="p">()</span>

            <span class="nx">@closeEdit</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-75">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-75">&#182;</a>                          </div>                          <p>Hide multiple edition fields</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">closeEdit: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;input&#39;</span><span class="p">,</span> <span class="s">&#39;#multipleEditFields&#39;</span><span class="p">).</span><span class="nx">val</span> <span class="s">&#39;&#39;</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#itemsContainer&#39;</span><span class="p">).</span><span class="nx">removeClass</span> <span class="s">&#39;onEdit&#39;</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#multipleEditFields, #multipleEditActions&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
            <span class="nx">$</span><span class="p">(</span><span class="s">&#39;#groupActions&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-76">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-76">&#182;</a>                          </div>                          <p>Deselects 1 item and takes it out from selection array</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">removeSelected: </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span>

            <span class="nv">$e = </span><span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">).</span><span class="nx">parent</span><span class="p">(</span><span class="s">&#39;li&#39;</span><span class="p">)</span>
            <span class="nv">id = </span><span class="nx">$e</span><span class="p">.</span><span class="nx">attr</span> <span class="s">&#39;id&#39;</span>

            <span class="k">return</span> <span class="nx">unless</span> <span class="nx">@app</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">.</span><span class="nx">get</span> <span class="nx">id</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">.</span><span class="nx">remove</span> <span class="nx">id</span>

            <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="si">#{</span><span class="nx">id</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="err">#</span><span class="s">items&quot;</span><span class="p">).</span><span class="nx">removeClass</span> <span class="s">&#39;active&#39;</span>

            <span class="nx">$e</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span>

            <span class="nx">@app</span><span class="p">.</span><span class="nx">navigate</span><span class="p">()</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-77">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-77">&#182;</a>                          </div>                          <p>Export selected items to CSV txt file in new window/tab</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">linkToCSV: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nv">url = </span><span class="s">&#39;collection?&amp;csv=true&amp;&#39;</span>
            <span class="nv">qs = </span><span class="p">[]</span>

            <span class="nb">window</span><span class="p">.</span><span class="nx">App</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">.</span><span class="nx">each</span> <span class="nf">(m) -&gt;</span>
                <span class="nx">qs</span><span class="p">.</span><span class="nx">push</span> <span class="s">&quot;fs=id:</span><span class="si">#{</span><span class="nx">m</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="s">&quot;</span>

            <span class="nb">window</span><span class="p">.</span><span class="nx">open</span> <span class="nx">url</span> <span class="o">+</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">join</span> <span class="s">&#39;&amp;&#39;</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-78">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-78">&#182;</a>                          </div>                          <p>Forms the URL for the Calendar button.
';' concatenated list of emails from selected items</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>        <span class="nv">gCalendarURL: </span><span class="p">()</span> <span class="o">=&gt;</span>

            <span class="nv">emails = </span><span class="p">[]</span>
            <span class="nx">@app</span><span class="p">.</span><span class="nx">itemSelection</span><span class="p">.</span><span class="nx">each</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span>
                <span class="nx">emails</span><span class="p">.</span><span class="nx">push</span> <span class="nx">m</span><span class="p">.</span><span class="nx">get</span> <span class="s">&#39;email&#39;</span>

            <span class="nv">now = </span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
            <span class="nv">year = </span><span class="nx">now</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span>
            <span class="nv">month = </span><span class="nx">now</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="nx">month</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">then</span> <span class="nv">month = </span><span class="s">&#39;0&#39;</span> <span class="o">+</span> <span class="nx">month</span>
            <span class="nv">day = </span><span class="nx">now</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span>
            <span class="k">if</span> <span class="nx">day</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">then</span> <span class="nv">day = </span><span class="s">&#39;0&#39;</span> <span class="o">+</span> <span class="nx">day</span>
            <span class="nv">defaultDate = </span><span class="nx">year</span> <span class="o">+</span> <span class="nx">month</span> <span class="o">+</span> <span class="nx">day</span>

            <span class="nv">fromHour = </span><span class="nx">now</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="nv">toHour = </span><span class="nx">now</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="nv">offset = </span><span class="nx">now</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">()</span><span class="o">/</span><span class="mi">60</span>

            <span class="nx">fromHour</span> <span class="o">+=</span> <span class="nx">offset</span>
            <span class="nx">toHour</span> <span class="o">+=</span> <span class="nx">offset</span>
            <span class="k">if</span> <span class="nx">fromHour</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">then</span> <span class="nv">fromHour = </span><span class="s">&#39;0&#39;</span> <span class="o">+</span> <span class="nx">fromHour</span>
            <span class="k">if</span> <span class="nx">toHour</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">then</span> <span class="nv">toHour = </span><span class="s">&#39;0&#39;</span> <span class="o">+</span> <span class="nx">toHour</span>

            <span class="nv">fromDate = </span><span class="nx">defaultDate</span> <span class="o">+</span> <span class="s">&#39;T&#39;</span> <span class="o">+</span> <span class="nx">fromHour</span> <span class="o">+</span> <span class="s">&#39;0000Z&#39;</span>
            <span class="nv">toDate = </span><span class="nx">defaultDate</span> <span class="o">+</span> <span class="s">&#39;T&#39;</span> <span class="o">+</span> <span class="nx">toHour</span> <span class="o">+</span> <span class="s">&#39;0000Z&#39;</span>

            <span class="nv">baseURL = </span><span class="s">&quot;http://www.google.com/calendar/event?action=TEMPLATE&quot;</span>
            <span class="nx">baseURL</span> <span class="o">+=</span> <span class="s">&quot;&amp;text=Please%20add%20a%20title%20for%20this%20event...&quot;</span>
            <span class="nx">baseURL</span> <span class="o">+=</span> <span class="s">&quot;&amp;dates=</span><span class="si">#{</span><span class="nx">fromDate</span><span class="si">}</span><span class="s">/</span><span class="si">#{</span><span class="nx">toDate</span><span class="si">}</span><span class="s">&amp;details=&amp;location=&quot;</span>
            <span class="nx">baseURL</span> <span class="o">+=</span> <span class="s">&quot;&amp;add=</span><span class="si">#{</span><span class="nx">emails</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span><span class="si">}</span><span class="s">&amp;trp=false&amp;sprop=&amp;sprop=name:&quot;</span>
            <span class="nx">baseURL</span></pre></div>                      </td>                  </tr>                                                      <tr id="section-79">                      <td class="docs">                          <div class="pilwrap">                              <a class="pilcrow" href="#section-79">&#182;</a>                          </div>                          <h3 id="paneview">Pane view</h3>

<p>Shows a detailed view of a facet field. Allows for different templates
based on entity.</p>                      </td>                      <td class="code">                          <div class="highlight"><pre>    <span class="k">class</span> <span class="nb">window</span><span class="p">.</span><span class="nx">PaneView</span> <span class="k">extends</span> <span class="nb">window</span><span class="p">.</span><span class="nx">BasePaneView</span>

        <span class="nv">events:</span>
            <span class="s">&quot;click a.destroy&quot;</span>     <span class="o">:</span> <span class="s">&quot;reset&quot;</span>

        <span class="nv">template: </span><span class="nf">() -&gt;</span>
            <span class="nx">_</span><span class="p">.</span><span class="nx">template</span> <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">extensions </span><span class="err">#</span><span class="s">pane-template&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">()</span>

        <span class="nv">initialize: </span><span class="p">(</span><span class="nx">@template</span><span class="p">,</span> <span class="nx">@field</span><span class="p">)</span> <span class="o">=&gt;</span>
            <span class="k">super</span>

        <span class="nv">reset: </span><span class="p">()</span> <span class="o">=&gt;</span>
            <span class="nx">$</span><span class="p">(</span><span class="nx">@el</span><span class="p">).</span><span class="nx">trigger</span> <span class="s">&#39;close&#39;</span>

        <span class="nv">render: </span><span class="p">()</span> <span class="o">=&gt;</span>
            <span class="nx">@$el</span><span class="p">.</span><span class="nx">html</span> <span class="nx">@template</span> <span class="nx">@field</span>
            <span class="nx">@</span>

        <span class="nv">destroy: </span><span class="p">()</span> <span class="o">=&gt;</span>
            <span class="nb">window</span><span class="p">.</span><span class="nv">paneView = </span><span class="kc">null</span>
            <span class="k">super</span>

</pre></div>                      </td>                  </tr>                                </tbody>          </table>      </div>  </body>  </html>